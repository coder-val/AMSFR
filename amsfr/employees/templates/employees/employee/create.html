{% extends 'base.html' %}
{% load static %}
{% block title %}Register Employee{% endblock title %}
{% block heading %}Register Employee{% endblock heading %}

{% block content %}
<div class="container">
    <div class="row">
        <form class="col s12" onsubmit="validateForm()" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="">
                <blockquote>
                    <span><b>Note: ID is permanent and can not be changed in the future.</b></span>
                </blockquote>
            </div>
            <div class="row">
                <div class="input-field col s4">
                    {{form.id.label_tag}}
                    {{form.id}}
                </div>
            </div>
            <div class="row">
                <div class="input-field col s4">
                    {{form.lastname.errors}}
                    {{form.lastname.label_tag}}
                    {{form.lastname}}
                </div>
                <div class="input-field col s4">
                    {{form.firstname.errors}}
                    {{form.firstname.label_tag}}
                    {{form.firstname}}
                </div>
                <div class="input-field col s4">
                    {{form.middlename.errors}}
                    {{form.middlename.label_tag}}
                    {{form.middlename}}
                </div>
            </div>
            <div class="row">
                <div class="input-field col s4">
                    {{form.birth_date.errors}}
                    {{form.birth_date.label_tag}}
                    {{form.birth_date}}
                </div>
                <div class="input-field col s4">
                    {{form.email.errors}}
                    {{form.email.label_tag}}
                    {{form.email}}
                </div>
                <div class="input-field col s4">
                    {{form.mobile_number.errors}}
                    {{form.mobile_number.label_tag}}
                    {{form.mobile_number}}
                </div>
            </div>
            <div class="row">
                <div class="input-field col s4">
                    {{form.barangay.errors}}
                    {{form.barangay.label_tag}}
                    {{form.barangay}}
                </div>
                <div class="input-field col s4">
                    {{form.municipality.errors}}
                    {{form.municipality.label_tag}}
                    {{form.municipality}}
                </div>
                <div class="input-field col s4">
                    {{form.province.errors}}
                    {{form.province.label_tag}}
                    {{form.province}}
                </div>
            </div>
            <div class="row">
                <div class="input-field col s4">
                    <label style="position:absolute; top: -33px" for={{form.gender.id_for_label}}>{{form.gender.label}}:</label>
                    {{form.gender.errors}}
                    {{form.gender}}
                </div>
                <div class="input-field col s4">
                    <label style="position:absolute; top: -33px" for={{form.department.id_for_label}}>{{form.department.label}}:</label>
                    {{form.department.errors}}
                    {{form.department}}
                </div>
                <div class="input-field col s4">
                    <label style="position:absolute; top: -33px" for={{form.designation.id_for_label}}>{{form.designation.label}}:</label>
                    {{form.designation.errors}}
                    {{form.designation}}
                </div>
            </div>
            <div class="">
                <blockquote>
                    <span><b>Note: Image must be clear and in 1 : 1 ratio [square].</b></span>
                </blockquote>
            </div>
            <div class="row">
                {% comment %} <div class="input-field col s12">
                    <label style="position:absolute; top: -45px" for={{form.biometric_id.id_for_label}}>{{form.biometric_id.label}}:</label>
                    {{form.biometric_id.errors}}
                    {{form.biometric_id}}
                </div> {% endcomment %}
                <div class="file-field input-field col s8">
                    {{form.biometric_id.errors}}
                    <div class="btn purple accent-3">
                        <span>{{form.biometric_id.label}}</span>
                        {{form.biometric_id}}
                    </div>
                    <div class="file-path-wrapper">
                        <input class="file-path validate" type="text" required>
                    </div>
                </div>
                <div class="input-field col s4">
                    {{form.date_employed.errors}}
                    {{form.date_employed.label_tag}}
                    {{form.date_employed}}
                </div>
            </div>
            <div class="row">
                <button class="right btn waves-effect waves-light green accent-4" type="submit" name="action">Register</button>
                <a href="{% url 'employee' %}" class="right btn waves-effect waves-light purple accent-3" style="margin-right: .5rem">Back</a>
            </div>
        </form>
    </div>
</div>
<div id="progressBarr" class="progress purple lighten-3" style="display:none">
    <div class="indeterminate purple accent-3"></div>
</div>
<script>
    const inputs = document.querySelectorAll('input');
    const datepkr = document.getElementById('id_birth_date');
    const datemp = document.getElementById('id_date_employed');
    const id = document.getElementById('id_id');
    let date = new Date();
    let yyyy = date.getFullYear().toString().slice(2);
    
    for (const input of inputs) {
        input.classList.add('validate')
    }
    id.minLength = 13
    id.setAttribute('value', `400392-${yyyy}-`)
    datepkr.classList.add('datepicker')
    datemp.classList.add('datepicker')

    {% comment %} function validateForm() {
        document.getElementById('progressBarr').style.display = 'block';
    } {% endcomment %}
</script>
{% endblock content %}